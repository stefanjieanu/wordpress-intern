!function(window,document,location,$,undefined){"use strict";/* Bez v1.0.10-g5ae0136
 * http://github.com/rdallasgray/bez
 *
 * A plugin to convert CSS3 cubic-bezier co-ordinates to rbjQuer-compatible easing functions
 *
 * With thanks to Nikolay Nemshilov for clarification on the cubic-bezier maths
 * See http://st-on-it.blogspot.com/2011/05/calculating-cubic-bezier-function.html
 *
 * Copyright 2011 Robert Dallas Gray. All rights reserved.
 * Provided under the FreeBSD license: https://github.com/rdallasgray/bez/blob/master/LICENSE.txt
 */
function bez(e){var t="bez_"+$.makeArray(arguments).join("_").replace(".","p");if("function"!=typeof $.easing[t]){$.easing[t]=function(t,a,o,n,s){return n*function(e,t){var a=[null,null],o=[null,null],n=[null,null],s=function(s,i){return n[i]=3*e[i],o[i]=3*(t[i]-e[i])-n[i],a[i]=1-n[i]-o[i],s*(n[i]+s*(o[i]+s*a[i]))};return function(e){return s(function(e){for(var t,i=e,r=0;++r<14&&(t=s(i,0)-e,!(Math.abs(t)<.001));)i-=t/function(e){return n[0]+e*(2*o[0]+3*a[0]*e)}(i);return i}(e),1)}}([e[0],e[1]],[e[2],e[3]])(a/s)+o}}return t}function noop(){}function minMaxLimit(e,t,a){return Math.max(isNaN(t)?-1/0:t,Math.min(isNaN(a)?1/0:a,e))}function readTransform(e){return e.match(/ma/)&&e.match(/-?\d+(?!d)/g)[e.match(/3d/)?12:4]}function readPosition(e){return CSS3?+readTransform(e.css("transform")):+e.css("left").replace("px","")}function getTranslate(e,t){var a={};return CSS3?a.transform="translate3d("+(e+(t?.001:0))+"px,0,0)":a.left=e,a}function getDuration(e){return{"transition-duration":e+"ms"}}function numberFromMeasure(e,t){return+String(e).replace(t||"px","")||undefined}function numberFromPercent(e){return/%$/.test(e)&&numberFromMeasure(e,"%")}function numberFromWhatever(e,t){return numberFromPercent(e)/100*t||numberFromMeasure(e)}function measureIsValid(e){return(!!numberFromMeasure(e)||!!numberFromMeasure(e,"%"))&&e}function getPosByIndex(e,t,a,o){return(e-(o||0))*(t+(a||0))}function getIndexByPos(e,t,a,o){return-Math.round(e/(t+(a||0))-(o||0))}function bindTransitionEnd(e){var t=e.data();if(!t.tEnd){e[0].addEventListener({WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",msTransition:"MSTransitionEnd",transition:"transitionend"}[Modernizr.prefixed("transition")],function(e){t.tProp&&e.propertyName.match(t.tProp)&&t.onEndFn()},!1),t.tEnd=!0}}function afterTransition(e,t,a,o){var n,s=e.data();s&&(s.onEndFn=function(){n||(n=!0,clearTimeout(s.tT),a())},s.tProp=t,clearTimeout(s.tT),s.tT=setTimeout(function(){s.onEndFn()},1.5*o),bindTransitionEnd(e))}function stop(e,t,a){if(e.length){var o=e.data();CSS3?(e.css(getDuration(0)),o.onEndFn=noop,clearTimeout(o.tT)):e.stop();var n=getNumber(t,function(){return readPosition(e)});return e.css(getTranslate(n,a)),n}}function getNumber(){for(var e,t=0,a=arguments.length;t<a&&"number"!=typeof(e=t?arguments[t]():arguments[t]);t++);return e}function edgeResistance(e,t){return Math.round(e+(t-e)/1.5)}function getProtocol(){return getProtocol.p=getProtocol.p||("https:"===location.protocol?"https://":"http://")}function parseHref(e){var t=document.createElement("a");return t.href=e,t}function findVideoId(e,t){if("string"!=typeof e)return e;var a,o;if((e=parseHref(e)).host.match(/youtube\.com/)&&e.search){if(a=e.search.split("v=")[1]){var n=a.indexOf("&");-1!==n&&(a=a.substring(0,n)),o="youtube"}}else e.host.match(/youtube\.com|youtu\.be/)?(a=e.pathname.replace(/^\/(embed\/|v\/)?/,"").replace(/\/.*/,""),o="youtube"):e.host.match(/vimeo\.com/)&&(o="vimeo",a=e.pathname.replace(/^\/(video\/)?/,"").replace(/\/.*/,""));return a&&o||!t||(a=e.href,o="custom"),!!a&&{id:a,type:o,s:e.search.replace(/^\?/,"")}}function getVideoThumbs(e,t,a){var o,n,s=e.video;return"youtube"===s.type?(o=(n=getProtocol()+"img.youtube.com/vi/"+s.id+"/default.jpg").replace(/\/default.jpg$/,"/hqdefault.jpg"),e.thumbsReady=!0):"vimeo"===s.type?$.ajax({url:getProtocol()+"vimeo.com/api/v2/video/"+s.id+".json",dataType:"jsonp",success:function(o){e.thumbsReady=!0,updateData(t,{img:o[0].thumbnail_large,thumb:o[0].thumbnail_small},e.i,a)}}):e.thumbsReady=!0,{img:o,thumb:n}}function updateData(e,t,a,o){for(var n=0,s=e.length;n<s;n++){var i=e[n];if(i.i===a&&i.thumbsReady){var r={videoReady:!0};r[STAGE_FRAME_KEY]=r[NAV_THUMB_FRAME_KEY]=r[NAV_DOT_FRAME_KEY]=!1,o.splice(n,1,$.extend({},i,r,t));break}}}function getDataFromHtml(e){function t(e,t,a){var o=a.thumb&&a.img!==a.thumb,n=numberFromMeasure(a.width||e.attr("width")),s=numberFromMeasure(a.height||e.attr("height"));$.extend(a,{width:n,height:s,thumbratio:getRatio(a.thumbratio||numberFromMeasure(a.thumbwidth||t&&t.attr("width")||o||n)/numberFromMeasure(a.thumbheight||t&&t.attr("height")||o||s))})}var a=[];return e.children().each(function(){var e=$(this),o=optionsToLowerCase($.extend(e.data(),{id:e.attr("id")}));if(e.is("a, img"))!function(e,a,o){var n=e.children("img").eq(0),s=e.attr("href"),i=e.attr("src"),r=n.attr("src"),l=a.video,d=!!o&&findVideoId(s,!0===l);d?s=!1:d=l,t(e,n,$.extend(a,{video:d,img:a.img||s||i||r,thumb:a.thumb||r||i||s}))}(e,o,!0);else{if(e.is(":empty"))return;t(e,null,$.extend(o,{html:this,_html:e.html()}))}a.push(o)}),a}function isHidden(e){return 0===e.offsetWidth&&0===e.offsetHeight}function isDetached(e){return!$.contains(document.documentElement,e)}function waitFor(e,t,a){e()?t():setTimeout(function(){waitFor(e,t)},a||100)}function setHash(e){location.replace(location.protocol+"//"+location.host+location.pathname.replace(/^\/?/,"/")+location.search+"#"+e)}function fit(e,t,a){var o=e.data(),n=o.measures;if(n&&(!o.l||o.l.W!==n.width||o.l.H!==n.height||o.l.r!==n.ratio||o.l.w!==t.w||o.l.h!==t.h||o.l.m!==a)){var s=n.width,i=n.height,r=t.w/t.h,l=n.ratio>=r,d="scaledown"===a,u="contain"===a,c="cover"===a;l&&(d||u)||!l&&c?i=(s=minMaxLimit(t.w,0,d?s:1/0))/n.ratio:(l&&c||!l&&(d||u))&&(s=(i=minMaxLimit(t.h,0,d?i:1/0))*n.ratio),e.css({width:Math.ceil(s),height:Math.ceil(i),marginLeft:Math.floor(-s/2),marginTop:Math.floor(-i/2)}),o.l={W:n.width,H:n.height,r:n.ratio,w:t.w,h:t.h,m:a}}return!0}function setStyle(e,t){var a=e[0];a.styleSheet?a.styleSheet.cssText=t:e.html(t)}function findShadowEdge(e,t,a){return t!==a&&(e<=t?"left":e>=a?"right":"left right")}function getIndexFromHash(e,t,a,o){if(!a)return!1;if(!isNaN(e))return e-(o?0:1);for(var n,s=0,i=t.length;s<i;s++){if(t[s].id===e){n=s;break}}return n}function smartClick(e,t,a){a=a||{},e.each(function(){var e,o=$(this),n=o.data();n.clickOn||(n.clickOn=!0,$.extend(touch(o,{onStart:function(t){e=t,(a.onStart||noop).call(this,t)},onMove:a.onMove||noop,onTouchEnd:a.onTouchEnd||noop,onEnd:function(a){a.moved||t.call(this,e)}}),{noMove:!0}))})}function div(e,t){return'<div class="'+e+'">'+(t||"")+"</div>"}function shuffle(e){for(var t=e.length;t;){var a=Math.floor(Math.random()*t--),o=e[t];e[t]=e[a],e[a]=o}return e}function clone(e){return"[object Array]"==Object.prototype.toString.call(e)&&$.map(e,function(e){return $.extend({},e)})}function lockScroll(e,t){$WINDOW.scrollLeft(e).scrollTop(t)}function optionsToLowerCase(e){if(e){var t={};return $.each(e,function(e,a){t[e.toLowerCase()]=a}),t}}function getRatio(e){if(e){var t=+e;return isNaN(t)?+(t=e.split("/"))[0]/+t[1]||undefined:t}}function stopEvent(e,t){e.preventDefault(),t&&e.stopPropagation()}function getDirectionSign(e){return e?">":"<"}function slide(e,t){var a=e.data(),o=Math.round(t.pos),n=function(){a.sliding=!1,(t.onEnd||noop)()};void 0!==t.overPos&&t.overPos!==t.pos&&(o=t.overPos,n=function(){slide(e,$.extend({},t,{overPos:t.pos,time:Math.max(TRANSITION_DURATION,t.time/2)}))});var s=$.extend(getTranslate(o,t._001),t.width&&{width:t.width});a.sliding=!0,CSS3?(e.css($.extend(getDuration(t.time),s)),t.time>10?afterTransition(e,"transform",n,t.time):n()):e.stop().animate(s,t.time,BEZIER,n)}function fade(e,t,a,o,n,s){var i=void 0!==s;if(i||(n.push(arguments),Array.prototype.push.call(arguments,n.length),!(n.length>1))){e=e||$(e),t=t||$(t);var r=e[0],l=t[0],d="crossfade"===o.method,u=function(){if(!u.done){u.done=!0;var e=(i||n.shift())&&n.shift();e&&fade.apply(this,e),(o.onEnd||noop)(!!e)}},c=o.time/(s||1);a.removeClass(fadeRearClass+" "+fadeFrontClass),e.stop().addClass(fadeRearClass),t.stop().addClass(fadeFrontClass),d&&l&&e.fadeTo(0,0),e.fadeTo(d?c:0,1,d&&u),t.fadeTo(c,0,u),r&&d||l||u()}}function extendEvent(e){var t=(e.touches||[])[0]||e;e._x=t.pageX,e._y=t.clientY,e._now=$.now()}function touch(e,t){function a(e){if(l=$(e.target),v.checked=c=h=f=!1,i||v.flow||e.touches&&e.touches.length>1||e.which>1||lastEvent&&lastEvent.type!==e.type&&preventEvent||(c=t.select&&l.is(t.select,m)))return c;u="touchstart"===e.type,h=l.is("a, a *",m),d=v.control,p=v.noMove||v.noSwipe||d?16:v.snap?0:4,extendEvent(e),r=lastEvent=e,moveEventType=e.type.replace(/down|start/,"move").replace(/Down/,"Move"),(t.onStart||noop).call(m,e,{control:d,$target:l}),i=v.flow=!0,u&&!v.go||stopEvent(e)}function o(e){if(e.touches&&e.touches.length>1||MS_POINTER&&!e.isPrimary||moveEventType!==e.type||!i)return i&&n(),void(t.onTouchEnd||noop)();extendEvent(e);var a=Math.abs(e._x-r._x),o=Math.abs(e._y-r._y),s=a-o,l=(v.go||v.x||s>=0)&&!v.noSwipe,d=s<0;u&&!v.checked?(i=l)&&stopEvent(e):(stopEvent(e),(t.onMove||noop).call(m,e,{touch:u})),!f&&Math.sqrt(Math.pow(a,2)+Math.pow(o,2))>p&&(f=!0),v.checked=v.checked||l||d}function n(e){(t.onTouchEnd||noop)();var a=i;v.control=i=!1,a&&(v.flow=!1),!a||h&&!v.checked||(e&&stopEvent(e),preventEvent=!0,clearTimeout(preventEventTimeout),preventEventTimeout=setTimeout(function(){preventEvent=!1},1e3),(t.onEnd||noop).call(m,{moved:f,$target:l,control:d,touch:u,startEvent:r,aborted:!e||"MSPointerCancel"===e.type}))}function s(){v.flow&&setTimeout(function(){v.flow=!1},TOUCH_TIMEOUT)}var i,r,l,d,u,c,h,p,f,m=e[0],v={};return MS_POINTER?(m[ADD_EVENT_LISTENER]("MSPointerDown",a,!1),document[ADD_EVENT_LISTENER]("MSPointerMove",o,!1),document[ADD_EVENT_LISTENER]("MSPointerCancel",n,!1),document[ADD_EVENT_LISTENER]("MSPointerUp",n,!1)):(m[ADD_EVENT_LISTENER]&&(m[ADD_EVENT_LISTENER]("touchstart",a,!1),m[ADD_EVENT_LISTENER]("touchmove",o,!1),m[ADD_EVENT_LISTENER]("touchend",n,!1),document[ADD_EVENT_LISTENER]("touchstart",function(){v.flow||setTimeout(function(){v.flow=!0},10)},!1),document[ADD_EVENT_LISTENER]("touchend",s,!1),document[ADD_EVENT_LISTENER]("touchcancel",s,!1),window[ADD_EVENT_LISTENER]("scroll",s,!1)),e.on("mousedown",a),$DOCUMENT.on("mousemove",o).on("mouseup",n)),e.on("click","a",function(e){console.log("test"),v.checked&&stopEvent(e)}),v}function moveOnTouch(e,t){function a(a,r){w=!0,o=n=a._x,d=a._now,l=[[d,o]],s=i=T.noMove||r?0:stop(e,(t.getPos||noop)(),t._001),(t.onStart||noop).call(g,a)}var o,n,s,i,r,l,d,u,c,h,p,f,m,v,w,g=e[0],_=e.data(),T={};return T=$.extend(touch(t.$wrap,{onStart:function(e,t){c=T.min,h=T.max,p=T.snap,f=e.altKey,w=v=!1,(m=t.control)||_.sliding||a(e)},onMove:function(d,u){T.noSwipe||(w||a(d),n=d._x,l.push([d._now,n]),r=findShadowEdge(i=s-(o-n),c,h),i<=c?i=edgeResistance(i,c):i>=h&&(i=edgeResistance(i,h)),T.noMove||(e.css(getTranslate(i,t._001)),v||(v=!0,u.touch||MS_POINTER||e.addClass(grabbingClass)),(t.onMove||noop).call(g,d,{pos:i,edge:r})))},onTouchEnd:t.onTouchEnd,onEnd:function(o){if(!T.noSwipe||!o.moved){w||a(o.startEvent,!0),o.touch||MS_POINTER||e.removeClass(grabbingClass);for(var r,d,m,v,_,C,S,x,y,E=(u=$.now())-TOUCH_TIMEOUT,I=null,b=TRANSITION_DURATION,A=t.friction,F=l.length-1;F>=0;F--){if(r=l[F][0],d=Math.abs(r-E),null===I||d<m)I=r,v=l[F][1];else if(I===E||d>m)break;m=d}S=minMaxLimit(i,c,h);var M=v-n,N=M>=0,D=u-I,j=D>TOUCH_TIMEOUT,L=!j&&i!==s&&S===i;p&&(S=minMaxLimit(Math[L?N?"floor":"ceil":"round"](i/p)*p,c,h),c=h=S),L&&(p||S===i)&&(y=-M/D,b*=minMaxLimit(Math.abs(y),t.timeLow,t.timeHigh),_=Math.round(i+y*b/A),p||(S=_),(!N&&_>h||N&&_<c)&&(x=_-(C=N?c:h),p||(S=C),x=minMaxLimit(S+.03*x,C-50,C+50),b=Math.abs((i-x)/(y/A)))),b*=f?10:1,(t.onEnd||noop).call(g,$.extend(o,{moved:o.moved||j&&p,pos:i,newPos:S,overPos:x,time:b}))}},select:t.select}),T)}function wheel(e,t){var a,o,n,s=e[0],i={prevent:{}};return s[ADD_EVENT_LISTENER]&&s[ADD_EVENT_LISTENER](WHEEL,function(e){var s=e.wheelDeltaY||-1*e.deltaY||0,r=e.wheelDeltaX||-1*e.deltaX||0,l=Math.abs(r)>Math.abs(s),d=getDirectionSign(r<0),u=o===d,c=$.now(),h=c-n<TOUCH_TIMEOUT;o=d,n=c,l&&i.ok&&(!i.prevent[d]||a)&&(stopEvent(e,!0),a&&u&&h||(t.shift&&(a=!0,clearTimeout(i.t),i.t=setTimeout(function(){a=!1},SCROLL_LOCK_TIMEOUT)),(t.onEnd||noop)(e,t.shift?d:r)))},!1),i}function calculateIndexes(){$.each($.twoj_slideshow.instances,function(e,t){t.index=e})}function addInstance(e){$.twoj_slideshow.instances.push(e),calculateIndexes()}function hideInstance(e){$.twoj_slideshow.instances.splice(e.index,1),calculateIndexes()}var _twoj_slideshowClass="twoj_slideshow",_fullscreenClass="fullscreen",wrapClass=_twoj_slideshowClass+"__wrap",wrapCss2Class=wrapClass+"--css2",wrapCss3Class=wrapClass+"--css3",wrapVideoClass=wrapClass+"--video",wrapFadeClass=wrapClass+"--fade",wrapSlideClass=wrapClass+"--slide",wrapNoControlsClass=wrapClass+"--no-controls",wrapNoShadowsClass=wrapClass+"--no-shadows",wrapPanYClass=wrapClass+"--pan-y",wrapRtlClass=wrapClass+"--rtl",wrapOnlyActiveClass=wrapClass+"--only-active",wrapNoCaptionsClass=wrapClass+"--no-captions",wrapToggleArrowsClass=wrapClass+"--toggle-arrows",stageClass=_twoj_slideshowClass+"__stage",stageFrameClass=stageClass+"__frame",stageFrameVideoClass=stageFrameClass+"--video",stageShaftClass=stageClass+"__shaft",grabClass=_twoj_slideshowClass+"__grab",pointerClass=_twoj_slideshowClass+"__pointer",arrClass=_twoj_slideshowClass+"__arr",arrDisabledClass=arrClass+"--disabled",arrPrevClass=arrClass+"--prev",arrNextClass=arrClass+"--next",arrArrClass=arrClass+"__arr",navClass=_twoj_slideshowClass+"__nav",navWrapClass=navClass+"-wrap",navShaftClass=navClass+"__shaft",navDotsClass=navClass+"--dots",navThumbsClass=navClass+"--thumbs",navFrameClass=navClass+"__frame",navFrameDotClass=navFrameClass+"--dot",navFrameThumbClass=navFrameClass+"--thumb",fadeClass=_twoj_slideshowClass+"__fade",fadeFrontClass=fadeClass+"-front",fadeRearClass=fadeClass+"-rear",shadowClass=_twoj_slideshowClass+"__shadow",shadowsClass=shadowClass+"s",shadowsLeftClass=shadowsClass+"--left",shadowsRightClass=shadowsClass+"--right",activeClass=_twoj_slideshowClass+"__active",selectClass=_twoj_slideshowClass+"__select",hiddenClass=_twoj_slideshowClass+"--hidden",fullscreenClass=_twoj_slideshowClass+"--fullscreen",fullscreenIconClass=_twoj_slideshowClass+"__fullscreen-icon",errorClass=_twoj_slideshowClass+"__error",loadingClass=_twoj_slideshowClass+"__loading",loadedClass=_twoj_slideshowClass+"__loaded",loadedFullClass=loadedClass+"--full",loadedImgClass=loadedClass+"--img",grabbingClass=_twoj_slideshowClass+"__grabbing",imgClass=_twoj_slideshowClass+"__img",imgFullClass=imgClass+"--full",dotClass=_twoj_slideshowClass+"__dot",thumbClass=_twoj_slideshowClass+"__thumb",thumbBorderClass=thumbClass+"-border",htmlClass=_twoj_slideshowClass+"__html",videoClass=_twoj_slideshowClass+"__video",videoPlayClass=videoClass+"-play",videoCloseClass=videoClass+"-close",captionClass=_twoj_slideshowClass+"__caption",captionWrapClass=_twoj_slideshowClass+"__caption__wrap",spinnerClass=_twoj_slideshowClass+"__spinner",_={},Modernizr=function(e,t,a){function o(e){p.cssText=e}function n(e,t){return typeof e===t}function s(e,t){for(var o in e){var n=e[o];if(!function(e,t){return!!~(""+e).indexOf(t)}(n,"-")&&p[n]!==a)return"pfx"!=t||n}return!1}function i(e,t,o){var i=e.charAt(0).toUpperCase()+e.slice(1),r=(e+" "+m.join(i+" ")+i).split(" ");return n(t,"string")||n(t,"undefined")?s(r,t):(r=(e+" "+v.join(i+" ")+i).split(" "),function(e,t,o){for(var s in e){var i=t[e[s]];if(i!==a)return!1===o?e[s]:n(i,"function")?i.bind(o||t):i}return!1}(r,t,o))}var r,l,d={},u=t.documentElement,c="modernizr",h=t.createElement(c),p=h.style,f=" -webkit- -moz- -o- -ms- ".split(" "),m="Webkit Moz O ms".split(" "),v="Webkit Moz O ms".toLowerCase().split(" "),w={},g=[],_=g.slice,T={}.hasOwnProperty;l=n(T,"undefined")||n(T.call,"undefined")?function(e,t){return t in e&&n(e.constructor.prototype[t],"undefined")}:function(e,t){return T.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var a=_.call(arguments,1),o=function(){if(this instanceof o){var n=function(){};n.prototype=t.prototype;var s=new n,i=t.apply(s,a.concat(_.call(arguments)));return Object(i)===i?i:s}return t.apply(e,a.concat(_.call(arguments)))};return o}),w.csstransforms3d=function(){return!!i("perspective")};for(var C in w)l(w,C)&&(r=C.toLowerCase(),d[r]=w[C](),g.push((d[r]?"":"no-")+r));return d.addTest=function(e,t){if("object"==typeof e)for(var o in e)l(e,o)&&d.addTest(o,e[o]);else{if(e=e.toLowerCase(),d[e]!==a)return d;t="function"==typeof t?t():t,"undefined"!=typeof enableClasses&&enableClasses&&(u.className+=" "+(t?"":"no-")+e),d[e]=t}return d},o(""),h=null,d._version="2.6.2",d._prefixes=f,d._domPrefixes=v,d._cssomPrefixes=m,d.testProp=function(e){return s([e])},d.testAllProps=i,d.testStyles=function(e,a,o,n){var s,i,r,l,d=t.createElement("div"),h=t.body,p=h||t.createElement("body");if(parseInt(o,10))for(;o--;)(r=t.createElement("div")).id=n?n[o]:c+(o+1),d.appendChild(r);return s=["&#173;",'<style id="s',c,'">',e,"</style>"].join(""),d.id=c,(h?d:p).innerHTML+=s,p.appendChild(d),h||(p.style.background="",p.style.overflow="hidden",l=u.style.overflow,u.style.overflow="hidden",u.appendChild(p)),i=a(d,e),h?d.parentNode.removeChild(d):(p.parentNode.removeChild(p),u.style.overflow=l),!!i},d.prefixed=function(e,t,a){return t?i(e,t,a):i(e,"pfx")},d}(0,document),fullScreenApi={ok:!1,is:function(){return!1},request:function(){},cancel:function(){},event:"",prefix:""},browserPrefixes="webkit moz o ms khtml".split(" ");if(void 0!==document.cancelFullScreen)fullScreenApi.ok=!0;else for(var i=0,il=browserPrefixes.length;i<il;i++)if(fullScreenApi.prefix=browserPrefixes[i],void 0!==document[fullScreenApi.prefix+"CancelFullScreen"]){fullScreenApi.ok=!0;break}fullScreenApi.ok&&(fullScreenApi.event=fullScreenApi.prefix+"fullscreenchange",fullScreenApi.is=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},fullScreenApi.request=function(e){return""===this.prefix?e.requestFullScreen():e[this.prefix+"RequestFullScreen"]()},fullScreenApi.cancel=function(e){return""===this.prefix?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()});/**
 * copyright (c) 2011-2013 Felix Gnass
 * Licensed under the MIT license
 */
var Spinner,spinnerDefaults={lines:12,length:5,width:2,radius:7,corners:1,rotate:15,color:"rgba(128, 128, 128, .75)",hwaccel:!0},spinnerOverride={top:"auto",left:"auto",className:""};Spinner=function(){function e(e,t){var a,o=document.createElement(e||"div");for(a in t)o[a]=t[a];return o}function t(e){for(var t=1,a=arguments.length;t<a;t++)e.appendChild(arguments[t]);return e}function a(e,t){var a,o,n=e.style;for(t=t.charAt(0).toUpperCase()+t.slice(1),o=0;o<d.length;o++)if(a=d[o]+t,n[a]!==undefined)return a;if(n[t]!==undefined)return t}function o(e,t){for(var o in t)e.style[a(e,o)||o]=t[o];return e}function n(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)e[o]===undefined&&(e[o]=a[o])}return e}function s(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e=e.offsetParent;)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function i(e,t){return"string"==typeof e?e:e[t%e.length]}function r(e){if(void 0===this)return new r(e);this.opts=n(e||{},r.defaults,h)}var l,d=["webkit","Moz","ms","O"],u={};var c=function(){var a=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],a),a.sheet||a.styleSheet}();var h={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};r.defaults={},n(r.prototype,{spin:function(t){this.stop();var a,n,i=this,r=i.opts,d=i.el=o(e(0,{className:r.className}),{position:r.position,width:0,zIndex:r.zIndex}),u=r.radius+r.length+r.width;if(t&&(t.insertBefore(d,t.firstChild||null),n=s(t),a=s(d),o(d,{left:("auto"==r.left?n.x-a.x+(t.offsetWidth>>1):parseInt(r.left,10)+u)+"px",top:("auto"==r.top?n.y-a.y+(t.offsetHeight>>1):parseInt(r.top,10)+u)+"px"})),d.setAttribute("role","progressbar"),i.lines(d,i.opts),!l){var c,h=0,p=(r.lines-1)*(1-r.direction)/2,f=r.fps,m=f/r.speed,v=(1-r.opacity)/(m*r.trail/100),w=m/r.lines;!function e(){h++;for(var t=0;t<r.lines;t++)c=Math.max(1-(h+(r.lines-t)*w)%m*v,r.opacity),i.opacity(d,t*r.direction+p,c,r);i.timeout=i.el&&setTimeout(e,~~(1e3/f))}()}return i},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=undefined),this},lines:function(a,n){function s(t,a){return o(e(),{position:"absolute",width:n.length+n.width+"px",height:n.width+"px",background:t,boxShadow:a,transformOrigin:"left",transform:"rotate("+~~(360/n.lines*d+n.rotate)+"deg) translate("+n.radius+"px,0)",borderRadius:(n.corners*n.width>>1)+"px"})}for(var r,d=0,h=(n.lines-1)*(1-n.direction)/2;d<n.lines;d++)r=o(e(),{position:"absolute",top:1+~(n.width/2)+"px",transform:n.hwaccel?"translate3d(0,0,0)":"",opacity:n.opacity,animation:l&&function(e,t,a,o){var n=["opacity",t,~~(100*e),a,o].join("-"),s=.01+a/o*100,i=Math.max(1-(1-e)/t*(100-s),e),r=l.substring(0,l.indexOf("Animation")).toLowerCase(),d=r&&"-"+r+"-"||"";u[n]||(c.insertRule("@"+d+"keyframes "+n+"{0%{opacity:"+i+"}"+s+"%{opacity:"+e+"}"+(s+.01)+"%{opacity:1}"+(s+t)%100+"%{opacity:"+e+"}100%{opacity:"+i+"}}",c.cssRules.length),u[n]=1);return n}(n.opacity,n.trail,h+d*n.direction,n.lines)+" "+1/n.speed+"s linear infinite"}),n.shadow&&t(r,o(s("#000","0 0 4px #000"),{top:"2px"})),t(a,t(r,s(i(n.color,d),"0 0 1px rgba(0,0,0,.1)")));return a},opacity:function(e,t,a){t<e.childNodes.length&&(e.childNodes[t].style.opacity=a)}});var p=o(e("group"),{behavior:"url(#default#VML)"});!a(p,"transform")&&p.adj?function(){function a(t,a){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',a)}c.addRule(".spin-vml","behavior:url(#default#VML)"),r.prototype.lines=function(e,n){function s(){return o(a("group",{coordsize:u+" "+u,coordorigin:-d+" "+-d}),{width:u,height:u})}function r(e,r,l){t(h,t(o(s(),{rotation:360/n.lines*e+"deg",left:~~r}),t(o(a("roundrect",{arcsize:n.corners}),{width:d,height:n.width,left:n.radius,top:-n.width>>1,filter:l}),a("fill",{color:i(n.color,e),opacity:n.opacity}),a("stroke",{opacity:0}))))}var l,d=n.length+n.width,u=2*d,c=2*-(n.width+n.length)+"px",h=o(s(),{position:"absolute",top:c,left:c});if(n.shadow)for(l=1;l<=n.lines;l++)r(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=n.lines;l++)r(l);return t(e,h)},r.prototype.opacity=function(e,t,a,o){var n=e.firstChild,o=o.shadow&&o.lines||0;n&&t+o<n.childNodes.length&&(n=n.childNodes[t+o],n=n&&n.firstChild,(n=n&&n.firstChild)&&(n.opacity=a))}}():l=a(p,"animation");return r}();var $WINDOW=$(window),$DOCUMENT=$(document),$HTML,$BODY,QUIRKS_FORCE="quirks"===location.hash.replace("#",""),TRANSFORMS3D=Modernizr.csstransforms3d,CSS3=TRANSFORMS3D&&!QUIRKS_FORCE,COMPAT=TRANSFORMS3D||"CSS1Compat"===document.compatMode,FULLSCREEN=fullScreenApi.ok,MOBILE=navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i),SLOW=!CSS3||MOBILE,ADD_EVENT_LISTENER="addEventListener",MS_POINTER=navigator.msPointerEnabled,WHEEL="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll",TOUCH_TIMEOUT=250,TRANSITION_DURATION=300,SCROLL_LOCK_TIMEOUT=1400,AUTOPLAY_INTERVAL=5e3,MARGIN=2,THUMB_SIZE=64,WIDTH=500,HEIGHT=333,STAGE_FRAME_KEY="$stageFrame",NAV_DOT_FRAME_KEY="$navDotFrame",NAV_THUMB_FRAME_KEY="$navThumbFrame",BEZIER=bez([.1,0,.25,1]),MAX_WIDTH=99999,OPTIONS={width:null,minwidth:null,maxwidth:"100%",height:null,minheight:null,maxheight:null,ratio:null,margin:MARGIN,glimpse:0,nav:"dots",navposition:"bottom",navwidth:null,thumbwidth:THUMB_SIZE,thumbheight:THUMB_SIZE,thumbmargin:MARGIN,thumbborderwidth:MARGIN,allowfullscreen:!1,fit:"contain",transition:"slide",clicktransition:null,transitionduration:TRANSITION_DURATION,captions:!0,hash:!1,startindex:0,loop:!1,autoplay:!1,stopautoplayontouch:!0,keyboard:!1,arrows:!1,click:!1,swipe:!1,trackpad:!1,shuffle:!1,direction:"ltr",shadows:!0,spinner:{lines:13,color:"rgba(0, 0, 0, .75)"}},KEYBOARD_OPTIONS={left:!0,right:!0,down:!1,up:!1,space:!1,home:!1,end:!1},lastEvent,moveEventType,preventEvent,preventEventTimeout;$.twoj_slideshow=function($twoj_slideshow,opts){function checkForVideo(){$.each(data,function(e,t){if(!t.i){t.i=dataFrameCount++;var a=findVideoId(t.video,!0);if(a){var o={};t.video=a,t.img||t.thumb?t.thumbsReady=!0:o=getVideoThumbs(t,data,that),updateData(data,{img:o.img,thumb:o.thumb},t.i,that)}}})}function allowKey(e){return o_keyboard[e]||that.fullScreen}function bindGlobalEvents(e){var t="keydown."+_twoj_slideshowClass,a="keydown."+_twoj_slideshowClass+stamp,o="resize."+_twoj_slideshowClass+stamp;e?($DOCUMENT.on(a,function(e){var t,a;$videoPlaying&&27===e.keyCode?(t=!0,unloadVideo($videoPlaying,!0,!0)):(that.fullScreen||opts.keyboard&&!that.index)&&(27===e.keyCode?(t=!0,that.cancelFullScreen()):e.shiftKey&&32===e.keyCode&&allowKey("space")||37===e.keyCode&&allowKey("left")||38===e.keyCode&&allowKey("up")?a="<":32===e.keyCode&&allowKey("space")||39===e.keyCode&&allowKey("right")||40===e.keyCode&&allowKey("down")?a=">":36===e.keyCode&&allowKey("home")?a="<<":35===e.keyCode&&allowKey("end")&&(a=">>")),(t||a)&&stopEvent(e),a&&that.show({index:a,slow:e.altKey,user:!0})}),that.index||$DOCUMENT.off(t).on(t,"textarea, input, select",function(e){!$BODY.hasClass(_fullscreenClass)&&e.stopPropagation()}),$WINDOW.on(o,that.resize)):($DOCUMENT.off(a),$WINDOW.off(o))}function appendElements(e){e!==appendElements.f&&(e?($twoj_slideshow.html("").addClass(_twoj_slideshowClass+" "+stampClass).append($wrap).before($style).before($anchor),addInstance(that)):($wrap.detach(),$style.detach(),$anchor.detach(),$twoj_slideshow.html(twoj_slideshowData.urtext).removeClass(stampClass),hideInstance(that)),bindGlobalEvents(e),appendElements.f=e)}function setData(){data=that.data=data||clone(opts.data)||getDataFromHtml($twoj_slideshow),size=that.size=data.length,!ready.ok&&opts.shuffle&&shuffle(data),checkForVideo(),activeIndex=limitIndex(activeIndex),size&&appendElements(!0)}function stageNoMove(){var e=size<2||$videoPlaying;stageShaftTouchTail.noMove=e||o_fade,stageShaftTouchTail.noSwipe=e||!opts.swipe,!o_transition&&$stageShaft.toggleClass(grabClass,!stageShaftTouchTail.noMove&&!stageShaftTouchTail.noSwipe),MS_POINTER&&$wrap.toggleClass(wrapPanYClass,!stageShaftTouchTail.noSwipe)}function setAutoplayInterval(e){!0===e&&(e=""),opts.autoplay=Math.max(+e||AUTOPLAY_INTERVAL,1.5*o_transitionDuration)}function setOptions(){function e(e,a){t[e?"add":"remove"].push(a)}that.options=opts=optionsToLowerCase(opts),o_fade="crossfade"===opts.transition||"dissolve"===opts.transition,o_loop=opts.loop&&(size>2||o_fade)&&(!o_transition||"slide"!==o_transition),o_transitionDuration=+opts.transitionduration||TRANSITION_DURATION,o_rtl="rtl"===opts.direction,o_keyboard=$.extend({},opts.keyboard&&KEYBOARD_OPTIONS,opts.keyboard);var t={add:[],remove:[]};size>1?(o_nav=opts.nav,o_navTop="top"===opts.navposition,t.remove.push(selectClass),$arrs.toggle(!!opts.arrows)):(o_nav=!1,$arrs.hide()),spinnerStop(),spinner=new Spinner($.extend(spinnerDefaults,opts.spinner,spinnerOverride,{direction:o_rtl?-1:1})),arrsUpdate(),stageWheelUpdate(),opts.autoplay&&setAutoplayInterval(opts.autoplay),o_thumbSide=numberFromMeasure(opts.thumbwidth)||THUMB_SIZE,o_thumbSide2=numberFromMeasure(opts.thumbheight)||THUMB_SIZE,stageWheelTail.ok=navWheelTail.ok=opts.trackpad&&!SLOW,stageNoMove(),extendMeasures(opts,[measures]),(o_navThumbs="thumbs"===o_nav)?(frameDraw(size,"navThumb"),$navFrame=$navThumbFrame,navFrameKey=NAV_THUMB_FRAME_KEY,setStyle($style,$.twoj_slideshow.jst.style({w:o_thumbSide,h:o_thumbSide2,b:opts.thumbborderwidth,m:opts.thumbmargin,s:stamp,q:!COMPAT})),$nav.addClass(navThumbsClass).removeClass(navDotsClass)):"dots"===o_nav?(frameDraw(size,"navDot"),$navFrame=$navDotFrame,navFrameKey=NAV_DOT_FRAME_KEY,$nav.addClass(navDotsClass).removeClass(navThumbsClass)):(o_nav=!1,$nav.removeClass(navThumbsClass+" "+navDotsClass)),o_nav&&(o_navTop?$navWrap.insertBefore($stage):$navWrap.insertAfter($stage),frameAppend.nav=!1,frameAppend($navFrame,$navShaft,"nav")),(o_allowFullScreen=opts.allowfullscreen)?($fullscreenIcon.appendTo($stage),o_nativeFullScreen=FULLSCREEN&&"native"===o_allowFullScreen):($fullscreenIcon.detach(),o_nativeFullScreen=!1),e(o_fade,wrapFadeClass),e(!o_fade,wrapSlideClass),e(!opts.captions,wrapNoCaptionsClass),e(o_rtl,wrapRtlClass),e("always"!==opts.arrows,wrapToggleArrowsClass),e(!(o_shadows=opts.shadows&&!SLOW),wrapNoShadowsClass),$wrap.addClass(t.add.join(" ")).removeClass(t.remove.join(" ")),lastOptions=$.extend({},opts)}function normalizeIndex(e){return e<0?(size+e%size)%size:e>=size?e%size:e}function limitIndex(e){return minMaxLimit(e,0,size-1)}function edgeIndex(e){return o_loop?normalizeIndex(e):limitIndex(e)}function getPrevIndex(e){return!!(e>0||o_loop)&&e-1}function getNextIndex(e){return!!(e<size-1||o_loop)&&e+1}function setStageShaftMinmaxAndSnap(){stageShaftTouchTail.min=o_loop?-1/0:-getPosByIndex(size-1,measures.w,opts.margin,repositionIndex),stageShaftTouchTail.max=o_loop?1/0:-getPosByIndex(0,measures.w,opts.margin,repositionIndex),stageShaftTouchTail.snap=measures.w+opts.margin}function setNavShaftMinMax(){navShaftTouchTail.min=Math.min(0,measures.nw-$navShaft.width()),navShaftTouchTail.max=0,$navShaft.toggleClass(grabClass,!(navShaftTouchTail.noMove=navShaftTouchTail.min===navShaftTouchTail.max))}function eachIndex(e,t,a){if("number"==typeof e){e=new Array(e);var o=!0}return $.each(e,function(e,n){if(o&&(n=e),"number"==typeof n){var s=data[normalizeIndex(n)];if(s){var i="$"+t+"Frame",r=s[i];a.call(this,e,n,s,r,i,r&&r.data())}}})}function setMeasures(e,t,a,o){(!measuresSetFLAG||"*"===measuresSetFLAG&&o===startIndex)&&(e=measureIsValid(opts.width)||measureIsValid(e)||WIDTH,t=measureIsValid(opts.height)||measureIsValid(t)||HEIGHT,that.resize({width:e,ratio:opts.ratio||a||e/t},0,o===startIndex||"*"))}function loadImg(e,t,a,o,n){eachIndex(e,t,function(e,s,i,r,l,d){function u(e){var t=normalizeIndex(s);triggerEvent(e,{index:t,src:g,frame:data[t]})}function c(){m.remove(),$.twoj_slideshow.cache[g]="error",i.html&&"stage"===t||!_||_===g?(!g||i.html||p?"stage"===t&&(r.trigger("f:load").removeClass(loadingClass+" "+errorClass).addClass(loadedClass),u("load"),setMeasures()):(r.trigger("f:error").removeClass(loadingClass).addClass(errorClass),u("error")),d.state="error",!(size>1&&data[s]===i)||i.html||i.deleted||i.video||p||(i.deleted=!0,that.splice(s,1))):(i[w]=g=_,loadImg([s],t,a,o,!0))}function h(){var e=10;waitFor(function(){return!touchedFLAG||!e--&&!SLOW},function(){$.twoj_slideshow.measures[g]=v.measures=$.twoj_slideshow.measures[g]||{width:f.width,height:f.height,ratio:f.width/f.height},setMeasures(v.measures.width,v.measures.height,v.measures.ratio,s),m.off("load error").addClass(imgClass+(p?" "+imgFullClass:"")).prependTo(r),fit(m,a||measures,o||i.fit||opts.fit),$.twoj_slideshow.cache[g]=d.state="loaded",setTimeout(function(){r.trigger("f:load").removeClass(loadingClass+" "+errorClass).addClass(loadedClass+" "+(p?loadedFullClass:loadedImgClass)),"stage"===t&&u("load")},5)})}if(r){var p=that.fullScreen&&i.full&&i.full!==i.img&&!d.$full&&"stage"===t;if(!d.$img||n||p){var f=new Image,m=$(f),v=m.data();d[p?"$full":"$img"]=m;var w="stage"===t?p?"full":"img":"thumb",g=i[w],_=p?null:i["stage"===t?"thumb":"img"];"navThumb"===t&&(r=d.$wrap),g?($.twoj_slideshow.cache[g]?function e(){"error"===$.twoj_slideshow.cache[g]?c():"loaded"===$.twoj_slideshow.cache[g]?setTimeout(h,0):setTimeout(e,100)}():($.twoj_slideshow.cache[g]="*",m.on("load",h).on("error",c)),d.state="",f.src=g):c()}}})}function spinnerSpin(e){$spinner.append(spinner.spin().el).appendTo(e)}function spinnerStop(){$spinner.detach(),spinner&&spinner.stop()}function updatetwoj_slideshowState(){var e=that.activeFrame[STAGE_FRAME_KEY];e&&!e.data().state&&(spinnerSpin(e),e.on("f:load f:error",function(){e.off("f:load f:error"),spinnerStop()}))}function frameDraw(e,t){eachIndex(e,t,function(e,a,o,n,s,i){n||((i=(n=o[s]=$wrap[s].clone()).data()).data=o,"stage"===t?(o.html&&$('<div class="'+htmlClass+'"></div>').append(o._html?$(o.html).removeAttr("id").html(o._html):o.html).appendTo(n),o.caption&&$(div(captionClass,div(captionWrapClass,o.caption))).appendTo(n),o.video&&n.addClass(stageFrameVideoClass).append($videoPlay.clone()),$stageFrame=$stageFrame.add(n)):"navDot"===t?$navDotFrame=$navDotFrame.add(n):"navThumb"===t&&(i.$wrap=n.children(":first"),$navThumbFrame=$navThumbFrame.add(n),o.video&&n.append($videoPlay.clone())))})}function callFit(e,t,a){return e&&e.length&&fit(e,t,a)}function stageFramePosition(e){eachIndex(e,"stage",function(e,t,a,o,n,s){if(o){toDetach[STAGE_FRAME_KEY][normalizeIndex(t)]=o.css($.extend({left:o_fade?0:getPosByIndex(t,measures.w,opts.margin,repositionIndex)},o_fade&&getDuration(0))),isDetached(o[0])&&(o.appendTo($stageShaft),unloadVideo(a.$video));var i=a.fit||opts.fit;callFit(s.$img,measures,i),callFit(s.$full,measures,i)}})}function thumbsDraw(e,t){if("thumbs"===o_nav&&!isNaN(e)){var a=-e,o=-e+measures.nw;$navThumbFrame.each(function(){var e=$(this).data(),n=e.eq,s={h:o_thumbSide2};s.w=e.w,e.l+e.w<a||e.l>o||callFit(e.$img,s,"cover")||t&&loadImg([n],"navThumb",s,"cover")})}}function frameAppend(e,t,a){if(!frameAppend[a]){var o="nav"===a&&o_navThumbs,n=0;t.append(e.filter(function(){for(var e,t=$(this),a=t.data(),o=0,n=data.length;o<n;o++)if(a.data===data[o]){e=!0,a.eq=o;break}return e||t.remove()&&!1}).sort(function(e,t){return $(e).data().eq-$(t).data().eq}).each(function(){if(o){var e=$(this),t=e.data(),a=Math.round(o_thumbSide2*t.data.thumbratio)||o_thumbSide;t.l=n,t.w=a,e.css({width:a}),n+=a+opts.thumbmargin}})),frameAppend[a]=!0}}function getDirection(e){return e-stageLeft>measures.w/3}function disableDirrection(e){return!(o_loop||activeIndex+e&&activeIndex-size+e||$videoPlaying)}function arrsUpdate(){$arrPrev.toggleClass(arrDisabledClass,disableDirrection(0)),$arrNext.toggleClass(arrDisabledClass,disableDirrection(1))}function stageWheelUpdate(){stageWheelTail.ok&&(stageWheelTail.prevent={"<":disableDirrection(0),">":disableDirrection(1)})}function getNavFrameBounds(e){var t,a,o=e.data();return o_navThumbs?(t=o.l,a=o.w):(t=e.position().left,a=e.width()),{c:t+a/2,min:-t+10*opts.thumbmargin,max:-t+measures.w-a-10*opts.thumbmargin}}function slideThumbBorder(e){var t=that.activeFrame[navFrameKey].data();slide($thumbBorder,{time:.9*e,pos:t.l,width:t.w-2*opts.thumbborderwidth})}function slideNavShaft(e){var t=data[e.guessIndex][navFrameKey];if(t){var a=navShaftTouchTail.min!==navShaftTouchTail.max,o=a&&getNavFrameBounds(that.activeFrame[navFrameKey]),n=a&&(e.keep&&slideNavShaft.l?slideNavShaft.l:minMaxLimit((e.coo||measures.nw/2)-getNavFrameBounds(t).c,o.min,o.max)),s=a&&minMaxLimit(n,navShaftTouchTail.min,navShaftTouchTail.max),i=.9*e.time;slide($navShaft,{time:i,pos:s||0,onEnd:function(){thumbsDraw(s,!0)}}),setShadow($nav,findShadowEdge(s,navShaftTouchTail.min,navShaftTouchTail.max)),slideNavShaft.l=n}}function navUpdate(){deactivateFrames(navFrameKey),toDeactivate[navFrameKey].push(that.activeFrame[navFrameKey].addClass(activeClass))}function deactivateFrames(e){for(var t=toDeactivate[e];t.length;)t.shift().removeClass(activeClass)}function detachFrames(e){var t=toDetach[e];$.each(activeIndexes,function(e,a){delete t[normalizeIndex(a)]}),$.each(t,function(e,a){delete t[e],a.detach()})}function stageShaftReposition(e){repositionIndex=dirtyIndex=activeIndex;var t=that.activeFrame[STAGE_FRAME_KEY];t&&(deactivateFrames(STAGE_FRAME_KEY),toDeactivate[STAGE_FRAME_KEY].push(t.addClass(activeClass)),e||that.show.onEnd(!0),stop($stageShaft,0,!0),detachFrames(STAGE_FRAME_KEY),stageFramePosition(activeIndexes),setStageShaftMinmaxAndSnap(),setNavShaftMinMax())}function extendMeasures(e,t){e&&$.each(t,function(t,a){a&&$.extend(a,{width:e.width||a.width,height:e.height,minwidth:e.minwidth,maxwidth:e.maxwidth,minheight:e.minheight,maxheight:e.maxheight,ratio:getRatio(e.ratio)})})}function triggerEvent(e,t){$twoj_slideshow.trigger(_twoj_slideshowClass+":"+e,[that,t])}function onTouchStart(){clearTimeout(onTouchEnd.t),touchedFLAG=1,opts.stopautoplayontouch?that.stopAutoplay():pausedAutoplayFLAG=!0}function onTouchEnd(){opts.stopautoplayontouch||(releaseAutoplay(),changeAutoplay()),onTouchEnd.t=setTimeout(function(){touchedFLAG=0},TRANSITION_DURATION+TOUCH_TIMEOUT)}function releaseAutoplay(){pausedAutoplayFLAG=!(!$videoPlaying&&!stoppedAutoplayFLAG)}function changeAutoplay(){if(clearTimeout(changeAutoplay.t),opts.autoplay&&!pausedAutoplayFLAG){that.autoplay||(that.autoplay=!0,triggerEvent("startautoplay"));var e=activeIndex,t=that.activeFrame[STAGE_FRAME_KEY].data();waitFor(function(){return t.state||e!==activeIndex},function(){changeAutoplay.t=setTimeout(function(){pausedAutoplayFLAG||e!==activeIndex||that.show(o_loop?getDirectionSign(!o_rtl):normalizeIndex(activeIndex+(o_rtl?-1:1)))},opts.autoplay)})}else that.autoplay&&(that.autoplay=!1,triggerEvent("stopautoplay"))}function cancelFullScreen(){that.fullScreen&&(that.fullScreen=!1,FULLSCREEN&&fullScreenApi.cancel(twoj_slideshow),$BODY.removeClass(_fullscreenClass),$HTML.removeClass(_fullscreenClass),$twoj_slideshow.removeClass(fullscreenClass).insertAfter($anchor),measures=$.extend({},measuresStash),unloadVideo($videoPlaying,!0,!0),updateTouchTails("x",!1),that.resize(),loadImg(activeIndexes,"stage"),lockScroll(scrollLeft,scrollTop),triggerEvent("fullscreenexit"))}function setShadow(e,t){o_shadows&&(e.removeClass(shadowsLeftClass+" "+shadowsRightClass),t&&!$videoPlaying&&e.addClass(t.replace(/^|\s/g," "+shadowsClass+"--")))}function unloadVideo(e,t,a){t&&($wrap.removeClass(wrapVideoClass),$videoPlaying=!1,stageNoMove()),e&&e!==$videoPlaying&&(e.remove(),triggerEvent("unloadvideo")),a&&(releaseAutoplay(),changeAutoplay())}function toggleControlsClass(e){$wrap.toggleClass(wrapNoControlsClass,e)}function stageCursor(e){if(!stageShaftTouchTail.flow){var t=e?e.pageX:stageCursor.x,a=t&&!disableDirrection(getDirection(t))&&opts.click;stageCursor.p===a||!o_fade&&opts.swipe||!$stage.toggleClass(pointerClass,a)||(stageCursor.p=a,stageCursor.x=t)}}function clickToShow(e){clearTimeout(clickToShow.t),opts.clicktransition&&opts.clicktransition!==opts.transition?(o_transition=opts.transition,that.setOptions({transition:opts.clicktransition}),clickToShow.t=setTimeout(function(){that.show(e)},10)):that.show(e)}function onStageTap(e,t){var a=e.target;$(a).hasClass(videoPlayClass)?that.playVideo():a===fullscreenIcon?that[(that.fullScreen?"cancel":"request")+"FullScreen"]():$videoPlaying?a===videoClose&&unloadVideo($videoPlaying,!0,!0):t?toggleControlsClass():opts.click&&clickToShow({index:e.shiftKey||getDirectionSign(getDirection(e._x)),slow:e.altKey,user:!0})}function updateTouchTails(e,t){stageShaftTouchTail[e]=navShaftTouchTail[e]=t}function onNavFrameClick(e,t){clickToShow({index:$(this).data().eq,slow:e.altKey,user:!0,coo:e._x-$nav.offset().left,time:t})}function reset(){if(setData(),setOptions(),!reset.i){reset.i=!0;var e=opts.startindex;(e||opts.hash&&location.hash)&&(startIndex=getIndexFromHash(e||location.hash.replace(/^#/,""),data,0===that.index||e,e)),activeIndex=repositionIndex=dirtyIndex=lastActiveIndex=startIndex=edgeIndex(startIndex)||0}if(size){if(changeToRtl())return;$videoPlaying&&unloadVideo($videoPlaying,!0),activeIndexes=[],detachFrames(STAGE_FRAME_KEY),that.show({index:activeIndex,time:0,reset:reset.ok}),that.resize()}else that.destroy();reset.ok=!0}function changeToRtl(){if(!changeToRtl.f===o_rtl)return changeToRtl.f=o_rtl,activeIndex=size-1-activeIndex,that.reverse(),!0}function ready(){ready.ok||(ready.ok=!0,triggerEvent("ready"))}$HTML=$HTML||$("html"),$BODY=$BODY||$("body");var that=this,stamp=$.now(),stampClass=_twoj_slideshowClass+stamp,twoj_slideshow=$twoj_slideshow[0],data,dataFrameCount=1,twoj_slideshowData=$twoj_slideshow.data(),size,$style=$("<style></style>"),$anchor=$(div(hiddenClass)),$wrap=$(div(wrapClass)),$stage=$(div(stageClass)).appendTo($wrap),stage=$stage[0],$stageShaft=$(div(stageShaftClass)).appendTo($stage),$stageFrame=$(),$arrPrev=$(div(arrClass+" "+arrPrevClass)),$arrNext=$(div(arrClass+" "+arrNextClass)),$arrs=$arrPrev.add($arrNext).appendTo($stage),$navWrap=$(div(navWrapClass)),$nav=$(div(navClass)).appendTo($navWrap),$navShaft=$(div(navShaftClass)).appendTo($nav),$navFrame,$navDotFrame=$(),$navThumbFrame=$(),stageShaftData=$stageShaft.data(),navShaftData=$navShaft.data(),$thumbBorder=$(div(thumbBorderClass)).appendTo($navShaft),$fullscreenIcon=$(div(fullscreenIconClass)),fullscreenIcon=$fullscreenIcon[0],$videoPlay=$(div(videoPlayClass)),$videoClose=$(div(videoCloseClass)).appendTo($stage),videoClose=$videoClose[0],spinner,$spinner=$(div(spinnerClass)),$videoPlaying,activeIndex=!1,activeFrame,activeIndexes,repositionIndex,dirtyIndex,lastActiveIndex,prevIndex,nextIndex,startIndex,o_loop,o_nav,o_navThumbs,o_navTop,o_allowFullScreen,o_nativeFullScreen,o_fade,o_thumbSide,o_thumbSide2,o_transitionDuration,o_transition,o_shadows,o_rtl,o_keyboard,lastOptions={},measures={},measuresSetFLAG,stageShaftTouchTail={},stageWheelTail={},navShaftTouchTail={},navWheelTail={},scrollTop,scrollLeft,showedFLAG,pausedAutoplayFLAG,stoppedAutoplayFLAG,toDeactivate={},toDetach={},measuresStash,touchedFLAG,hoverFLAG,navFrameKey,stageLeft=0,fadeStack=[];$wrap[STAGE_FRAME_KEY]=$(div(stageFrameClass)),$wrap[NAV_THUMB_FRAME_KEY]=$(div(navFrameClass+" "+navFrameThumbClass,div(thumbClass))),$wrap[NAV_DOT_FRAME_KEY]=$(div(navFrameClass+" "+navFrameDotClass,div(dotClass))),toDeactivate[STAGE_FRAME_KEY]=[],toDeactivate[NAV_THUMB_FRAME_KEY]=[],toDeactivate[NAV_DOT_FRAME_KEY]=[],toDetach[STAGE_FRAME_KEY]={},$wrap.addClass(CSS3?wrapCss3Class:wrapCss2Class),twoj_slideshowData.twoj_slideshow=this,that.startAutoplay=function(e){return that.autoplay?this:(pausedAutoplayFLAG=stoppedAutoplayFLAG=!1,setAutoplayInterval(e||opts.autoplay),changeAutoplay(),this)},that.stopAutoplay=function(){return that.autoplay&&(pausedAutoplayFLAG=stoppedAutoplayFLAG=!0,changeAutoplay()),this},that.show=function(e){var t;"object"!=typeof e?(t=e,e={}):t=e.index,t=">"===t?dirtyIndex+1:"<"===t?dirtyIndex-1:"<<"===t?0:">>"===t?size-1:t,t=void 0===(t=isNaN(t)?getIndexFromHash(t,data,!0):t)?activeIndex||0:t,that.activeIndex=activeIndex=edgeIndex(t),prevIndex=getPrevIndex(activeIndex),nextIndex=getNextIndex(activeIndex),activeIndexes=[activeIndex,prevIndex,nextIndex],dirtyIndex=o_loop?t:activeIndex;var a=Math.abs(lastActiveIndex-dirtyIndex),o=getNumber(e.time,function(){return Math.min(o_transitionDuration*(1+(a-1)/12),2*o_transitionDuration)}),n=e.overPos;e.slow&&(o*=10),that.activeFrame=activeFrame=data[activeIndex],unloadVideo($videoPlaying,activeFrame.i!==data[normalizeIndex(repositionIndex)].i),frameDraw(activeIndexes,"stage"),stageFramePosition(SLOW?[dirtyIndex]:[dirtyIndex,getPrevIndex(dirtyIndex),getNextIndex(dirtyIndex)]),updateTouchTails("go",!0),e.reset||triggerEvent("show",{user:e.user,time:o}),pausedAutoplayFLAG=!0;var s=that.show.onEnd=function(t){if(!s.ok){if(s.ok=!0,t||stageShaftReposition(!0),!e.reset&&(triggerEvent("showend",{user:e.user}),!t&&o_transition&&o_transition!==opts.transition))return that.setOptions({transition:o_transition}),void(o_transition=!1);updatetwoj_slideshowState(),loadImg(activeIndexes,"stage"),updateTouchTails("go",!1),stageWheelUpdate(),stageCursor(),releaseAutoplay(),changeAutoplay()}};if(o_fade){fade(activeFrame[STAGE_FRAME_KEY],activeIndex!==lastActiveIndex?data[lastActiveIndex][STAGE_FRAME_KEY]:null,$stageFrame,{time:o,method:opts.transition,onEnd:s},fadeStack)}else slide($stageShaft,{pos:-getPosByIndex(dirtyIndex,measures.w,opts.margin,repositionIndex),overPos:n,time:o,onEnd:s,_001:!0});if(arrsUpdate(),o_nav){navUpdate();var i=limitIndex(activeIndex+minMaxLimit(dirtyIndex-lastActiveIndex,-1,1));slideNavShaft({time:o,coo:i!==activeIndex&&e.coo,guessIndex:void 0!==e.coo?i:activeIndex,keep:e.reset}),o_navThumbs&&slideThumbBorder(o)}return showedFLAG=void 0!==lastActiveIndex&&lastActiveIndex!==activeIndex,lastActiveIndex=activeIndex,opts.hash&&showedFLAG&&!that.eq&&setHash(activeFrame.id||activeIndex+1),this},that.requestFullScreen=function(){return o_allowFullScreen&&!that.fullScreen&&(scrollTop=$WINDOW.scrollTop(),scrollLeft=$WINDOW.scrollLeft(),lockScroll(0,0),updateTouchTails("x",!0),measuresStash=$.extend({},measures),$twoj_slideshow.addClass(fullscreenClass).appendTo($BODY.addClass(_fullscreenClass)),$HTML.addClass(_fullscreenClass),unloadVideo($videoPlaying,!0,!0),that.fullScreen=!0,o_nativeFullScreen&&fullScreenApi.request(twoj_slideshow),that.resize(),loadImg(activeIndexes,"stage"),updatetwoj_slideshowState(),triggerEvent("fullscreenenter")),this},that.cancelFullScreen=function(){return o_nativeFullScreen&&fullScreenApi.is()?fullScreenApi.cancel(document):cancelFullScreen(),this},document.addEventListener&&document.addEventListener(fullScreenApi.event,function(){!data||fullScreenApi.is()||$videoPlaying||cancelFullScreen()},!1),that.resize=function(e){if(!data)return this;extendMeasures(that.fullScreen?{width:"100%",maxwidth:null,minwidth:null,height:"100%",maxheight:null,minheight:null}:optionsToLowerCase(e),[measures,that.fullScreen||opts]);var t=arguments[1]||0,a=arguments[2],o=measures.width,n=measures.height,s=measures.ratio,i=$WINDOW.height()-(o_nav?$nav.height():0);return measureIsValid(o)&&($wrap.addClass(wrapOnlyActiveClass).css({width:o,minWidth:measures.minwidth||0,maxWidth:measures.maxwidth||MAX_WIDTH}),o=measures.W=measures.w=$wrap.width(),measures.nw=o_nav&&numberFromWhatever(opts.navwidth,o)||o,opts.glimpse&&(measures.w-=Math.round(2*(numberFromWhatever(opts.glimpse,o)||0))),$stageShaft.css({width:measures.w,marginLeft:(measures.W-measures.w)/2}),(n=(n=numberFromWhatever(n,i))||s&&o/s)&&(o=Math.round(o),n=measures.h=Math.round(minMaxLimit(n,numberFromWhatever(measures.minheight,i),numberFromWhatever(measures.maxheight,i))),$stage.stop().animate({width:o,height:n},t,function(){$wrap.removeClass(wrapOnlyActiveClass)}),stageShaftReposition(),o_nav&&($nav.stop().animate({width:measures.nw},t),slideNavShaft({guessIndex:activeIndex,time:t,keep:!0}),o_navThumbs&&frameAppend.nav&&slideThumbBorder(t)),measuresSetFLAG=a||!0,ready())),stageLeft=$stage.offset().left,this},that.setOptions=function(e){return $.extend(opts,e),reset(),this},that.shuffle=function(){return data&&shuffle(data)&&reset(),this},that.destroy=function(){return that.cancelFullScreen(),that.stopAutoplay(),data=that.data=null,appendElements(),activeIndexes=[],detachFrames(STAGE_FRAME_KEY),this},that.playVideo=function(){var e=that.activeFrame,t=e.video,a=activeIndex;return"object"==typeof t&&e.videoReady&&(o_nativeFullScreen&&that.fullScreen&&that.cancelFullScreen(),waitFor(function(){return!fullScreenApi.is()||a!==activeIndex},function(){a===activeIndex&&(e.$video=e.$video||$($.twoj_slideshow.jst.video(t)),e.$video.appendTo(e[STAGE_FRAME_KEY]),$wrap.addClass(wrapVideoClass),$videoPlaying=e.$video,stageNoMove(),triggerEvent("loadvideo"))})),this},that.stopVideo=function(){return unloadVideo($videoPlaying,!0,!0),this},$stage.on("mousemove",stageCursor),stageShaftTouchTail=moveOnTouch($stageShaft,{onStart:onTouchStart,onMove:function(e,t){setShadow($stage,t.edge)},onTouchEnd:onTouchEnd,onEnd:function(result){if(setShadow($stage),!(result.moved||result.control||0!=result.pos||0!=result.newPos||"twoj_slideshow__html"!=result.startEvent.target.className&&"twoj_slideshow__img"!=result.startEvent.target.className)){var link=twoj_slideshowData.twoj_slideshow.activeFrame.link,link_targer=twoj_slideshowData.twoj_slideshow.activeFrame.link_targer;if(void 0!==link&&""!=link){if("javascript"!=link_targer)return"_blank"!=link_targer&&(link_targer="_self"),void window.open(link,link_targer);eval(link)}}var toggleControlsFLAG=(MS_POINTER&&!hoverFLAG||result.touch)&&opts.arrows&&"always"!==opts.arrows;if(result.moved||toggleControlsFLAG&&result.pos!==result.newPos&&!result.control){var index=getIndexByPos(result.newPos,measures.w,opts.margin,repositionIndex);that.show({index:index,time:o_fade?o_transitionDuration:result.time,overPos:result.overPos,user:!0})}else result.aborted||result.control||onStageTap(result.startEvent,toggleControlsFLAG)},_001:!0,timeLow:1,timeHigh:1,friction:2,select:"."+selectClass+", ."+selectClass+" *",$wrap:$stage}),navShaftTouchTail=moveOnTouch($navShaft,{onStart:onTouchStart,onMove:function(e,t){setShadow($nav,t.edge)},onTouchEnd:onTouchEnd,onEnd:function(e){function t(){slideNavShaft.l=e.newPos,releaseAutoplay(),changeAutoplay(),thumbsDraw(e.newPos,!0)}if(e.moved)e.pos!==e.newPos?(pausedAutoplayFLAG=!0,slide($navShaft,{time:e.time,pos:e.newPos,overPos:e.overPos,onEnd:t}),thumbsDraw(e.newPos),o_shadows&&setShadow($nav,findShadowEdge(e.newPos,navShaftTouchTail.min,navShaftTouchTail.max))):t();else{var a=e.$target.closest("."+navFrameClass,$navShaft)[0];a&&onNavFrameClick.call(a,e.startEvent)}},timeLow:.5,timeHigh:2,friction:5,$wrap:$nav}),stageWheelTail=wheel($stage,{shift:!0,onEnd:function(e,t){onTouchStart(),onTouchEnd(),that.show({index:t,slow:e.altKey})}}),navWheelTail=wheel($nav,{onEnd:function(e,t){onTouchStart(),onTouchEnd();var a=stop($navShaft)+.25*t;$navShaft.css(getTranslate(minMaxLimit(a,navShaftTouchTail.min,navShaftTouchTail.max))),o_shadows&&setShadow($nav,findShadowEdge(a,navShaftTouchTail.min,navShaftTouchTail.max)),navWheelTail.prevent={"<":a>=navShaftTouchTail.max,">":a<=navShaftTouchTail.min},clearTimeout(navWheelTail.t),navWheelTail.t=setTimeout(function(){thumbsDraw(a,!0)},TOUCH_TIMEOUT),thumbsDraw(a)}}),$wrap.hover(function(){setTimeout(function(){touchedFLAG||toggleControlsClass(!(hoverFLAG=!0))},0)},function(){hoverFLAG&&toggleControlsClass(!(hoverFLAG=!1))}),smartClick($arrs,function(e){stopEvent(e),clickToShow({index:$arrs.index(this)?">":"<",slow:e.altKey,user:!0})},{onStart:function(){onTouchStart(),stageShaftTouchTail.control=!0},onTouchEnd:onTouchEnd}),$.each("load push pop shift unshift reverse sort splice".split(" "),function(e,t){that[t]=function(){return data=data||[],"load"!==t?Array.prototype[t].apply(data,arguments):arguments[0]&&"object"==typeof arguments[0]&&arguments[0].length&&(data=clone(arguments[0])),reset(),that}}),reset()},$.fn.twoj_slideshow=function(e){return this.each(function(){var t=this,a=$(this),o=a.data(),n=o.twoj_slideshow;n?n.setOptions(e):waitFor(function(){return!isHidden(t)},function(){o.urtext=a.html(),new $.twoj_slideshow(a,$.extend({},OPTIONS,window.twoj_slideshowDefaults,e,o))})})},$.twoj_slideshow.instances=[],$.twoj_slideshow.cache={},$.twoj_slideshow.measures={},$=$||{},$.twoj_slideshow=$.twoj_slideshow||{},$.twoj_slideshow.jst=$.twoj_slideshow.jst||{},$.twoj_slideshow.jst.style=function(e){var t,a="";_.escape;return a+=".twoj_slideshow"+(null==(t=e.s)?"":t)+" .twoj_slideshow__nav--thumbs .twoj_slideshow__nav__frame{\npadding:"+(null==(t=e.m)?"":t)+"px;\nheight:"+(null==(t=e.h)?"":t)+"px}\n.twoj_slideshow"+(null==(t=e.s)?"":t)+" .twoj_slideshow__thumb-border{\nheight:"+(null==(t=e.h-e.b*(e.q?0:2))?"":t)+"px;\nborder-width:"+(null==(t=e.b)?"":t)+"px;\nmargin-top:"+(null==(t=e.m)?"":t)+"px}"},$.twoj_slideshow.jst.video=function(e){var t="",a=(_.escape,Array.prototype.join);return t+='<div class="twoj_slideshow__video"><iframe src="',function(){t+=a.call(arguments,"")}(("youtube"==e.type?"https://youtube.com/embed/"+e.id+"?autoplay=1":"vimeo"==e.type?"https://player.vimeo.com/video/"+e.id+"?autoplay=1&badge=0":e.id)+(e.s&&"custom"!=e.type?"&"+e.s:"")),t+='" frameborder="0" allowfullscreen></iframe></div>'},$(function(){$("."+_twoj_slideshowClass+':not([data-auto="false"])').twoj_slideshow()})}(window,document,location,"undefined"!=typeof rbjQuer&&rbjQuer?rbjQuer:jQuery),function(e){e(".twoj_slideshow").each(function(){var t=window[e(this).data("options")];console.log(t),console.log(this);var a=e.extend({},t);e(this).twoj_slideshow(a)})}("undefined"!=typeof rbjQuer&&rbjQuer?rbjQuer:jQuery);